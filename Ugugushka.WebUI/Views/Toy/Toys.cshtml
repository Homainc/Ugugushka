@using Ugugushka.WebUI.HtmlHelpers
@model IPagedResult<ToyItemViewModel>
@{
    ViewBag.Title = "Управление - Игрушки";
}

<div class="mt-5">
    @if (TempData["message"] != null)
    {
        <div>
            @TempData["message"]
        </div>
    }
    <h2>Игрушки (@Model.TotalItems)</h2>
    <a class="btn btn-primary" href="@Url.Action("AddToy", "Toy")">Добавить</a>
    <table class="table mt-3">
        <thead>
        <tr>
            <th>Ид</th>
            <th>Название</th>
            <th>Описание</th>
            <th>Категория</th>
            <th>Раздел</th>
            <th>Цена</th>
            <th>На складе</th>
            <th>Действия</th>
        </tr>
        </thead>
        <tbody>
        @foreach (var toy in Model.Items)
        {
            <tr>
                <td>@toy.Id</td>
                <td>@toy.Name</td>
                <td>@toy.Description</td>
                <td>@Html.DefaultString(toy.CategoryName, "Нет")</td>
                <td>@Html.DefaultString(toy.PartitionName, "Нет")</td>
                <td>@toy.Price</td>
                <td>@Html.IsOnStock(toy.IsOnStock)</td>
                <td>
                    @using (Html.BeginForm("Delete", "Toy"))
                    {
                        @Html.Hidden("Id", toy.Id)
                        <input type="submit" value="Удалить"/>
                    }
                </td>
            </tr>
        }
        </tbody>
    </table>

    <div class="d-flex align-self-center mt-3">
        @Html.PageLinks(@Model.PageNumber, @Model.TotalPages, x => Url.Action("Toys", new {page = x}))
    </div>
</div>

